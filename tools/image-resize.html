<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Resizer - PicProTools</title>
    <meta name="description" content="Resize JPG, PNG, and WebP images instantly in your browser. Free tool with aspect ratio lock and high-quality local processing.">
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }
        body { font-family: system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--text); line-height: 1.5; margin: 0; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: var(--card); padding: 2rem; border-radius: 12px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        h1 { margin-top: 0; color: var(--primary); font-size: 1.8rem; }
        .upload-area { border: 2px dashed #cbd5e1; padding: 2rem; text-align: center; border-radius: 8px; cursor: pointer; transition: 0.3s; margin-bottom: 1.5rem; }
        .upload-area:hover { border-color: var(--primary); background: #eff6ff; }
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; }
        .input-group { display: flex; flex-direction: column; }
        label { font-size: 0.875rem; font-weight: 600; margin-bottom: 0.25rem; }
        input[type="number"] { padding: 0.5rem; border: 1px solid #cbd5e1; border-radius: 4px; }
        .checkbox-group { grid-column: span 2; display: flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; }
        .actions { display: flex; gap: 1rem; flex-wrap: wrap; }
        button { padding: 0.75rem 1.5rem; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: #1d4ed8; }
        .btn-download { background: #10b981; color: white; display: none; }
        .btn-download:hover { background: #059669; }
        #preview-container { margin-top: 2rem; text-align: center; display: none; }
        canvas { max-width: 100%; height: auto; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); background: #eee; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <h1>Image Resizer</h1>
    <p>Upload an image to resize locally. Your files never leave your device.</p>

    <div class="upload-area" onclick="document.getElementById('fileInput').click()">
        <p>Click to Upload or Drag & Drop</p>
        <span style="font-size: 0.8rem; color: #64748b;">JPG, PNG, WebP supported</span>
        <input type="file" id="fileInput" class="hidden" accept="image/jpeg, image/png, image/webp">
    </div>

    <div id="editor" class="hidden">
        <div class="controls">
            <div class="input-group">
                <label>Width (px)</label>
                <input type="number" id="widthInput">
            </div>
            <div class="input-group">
                <label>Height (px)</label>
                <input type="number" id="heightInput">
            </div>
            <div class="checkbox-group">
                <input type="checkbox" id="lockRatio" checked>
                <label for="lockRatio">Lock Aspect Ratio</label>
            </div>
        </div>

        <div class="actions">
            <button class="btn-primary" onclick="processImage()">Preview Resize</button>
            <a id="downloadLink" class="hidden"></a>
            <button id="downloadBtn" class="btn-download" onclick="downloadImage()">Download Resized Image</button>
        </div>

        <div id="preview-container">
            <h3>Preview</h3>
            <canvas id="canvas"></canvas>
        </div>
    </div>
</div>

<script>
    const fileInput = document.getElementById('fileInput');
    const widthInput = document.getElementById('widthInput');
    const heightInput = document.getElementById('heightInput');
    const lockRatio = document.getElementById('lockRatio');
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    
    let originalImage = new Image();
    let aspectRatio = 1;

    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(event) {
            originalImage.onload = function() {
                aspectRatio = originalImage.width / originalImage.height;
                widthInput.value = originalImage.width;
                heightInput.value = originalImage.height;
                
                document.getElementById('editor').classList.remove('hidden');
                document.getElementById('preview-container').style.display = 'none';
                document.getElementById('downloadBtn').style.display = 'none';
            };
            originalImage.src = event.target.result;
        };
        reader.readAsDataURL(file);
    });

    // Handle Aspect Ratio Locking
    widthInput.addEventListener('input', () => {
        if (lockRatio.checked) {
            heightInput.value = Math.round(widthInput.value / aspectRatio);
        }
    });

    heightInput.addEventListener('input', () => {
        if (lockRatio.checked) {
            widthInput.value = Math.round(heightInput.value * aspectRatio);
        }
    });

    function processImage() {
        const targetWidth = parseInt(widthInput.value);
        const targetHeight = parseInt(heightInput.value);

        if (!targetWidth || !targetHeight) return alert("Please enter valid dimensions");

        canvas.width = targetWidth;
        canvas.height = targetHeight;

        // Draw and resize
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(originalImage, 0, 0, targetWidth, targetHeight);

        document.getElementById('preview-container').style.display = 'block';
        document.getElementById('downloadBtn').style.display = 'inline-block';
    }

    function downloadImage() {
        const link = document.getElementById('downloadLink');
        const format = originalImage.src.split(';')[0].split(':')[1] || 'image/png';
        link.download = `resized-picpro-${Date.now()}.png`;
        link.href = canvas.toDataURL(format, 0.9);
        link.click();
    }
</script>

</body>
</html>
